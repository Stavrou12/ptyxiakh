<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Clean Beaches Locator</title>
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
       
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="stylesheet.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
            <div class="logo d-flex align-items-center">
                <img src="logo.jpg" alt="Beach-Discover Logo" onclick="refresh()" class="img-fluid rounded-logo" id="logo-img">
                <h1 class="h3 mb-0">Beach-Discover</h1>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item"><a class="nav-link" href="" onclick="gotoform()">Αρχική</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contactModal" onclick="openContactForm()">Επικοινωνία</a></li>
                    <li id ="ii" class="fa fa-cog" onclick="openSettings()"></li> <!-- Settings icon -->
                </ul>
            </div>
        </nav>
        <header>
            <div class="header-content">
                <div class="title-description">
                    <h1>Βρες τις καθαρότερες παραλίες της Κρήτης</h1>
                </div>
            </div>
        </header>


        <div class="main-content">
            <img src="crete_1.jpg" alt="Beautiful beach" class="responsive-header-image">
            <div class="location-section text-center p-4">
                <h3>Πώς θέλετε να επιλέξετε τοποθεσία;</h3>
                <!-- Option to track user's location -->
                <div>
                    <input type="radio" id="trackLocation" name="locationOption" value="track" onchange="handleLocationSelection()">
                    <label for="trackLocation">Να επιτρέπεται στο πρόγραμμα περιήγησης να παρακολουθεί την τοποθεσία μου</label>
                    <input type="radio" id="chooseOnMap" name="locationOption" value="map" onchange="handleLocationSelection()">
                    <label for="chooseOnMap">Επιλέξτε τοποθεσία στο χάρτη</label>
                    <p style="font-size: 14px;">*Δείκτης ποιότητας νερού: Όσο πιο κοντά στο 0 είναι η βαθμολογία ποιότητας των υδάτων, τόσο πιο καθαρή είναι η παραλία.</p>
                </div>
                <button id="findBeachBtn" class="btn btn-primary mt-3">Ψάξε!</button>
            </div>
              <div class="location-section text-center p-4">
                <!-- Option to track user's location -->
                <div>
                    <p style="font-size: 14px;">Η ποιότητα του νερού αξιολογείται μέσω δειγμάτων που δείχνουν την κατάσταση του τη στιγμή της δειγματοληψίας, αν και το νερό μπορεί να αλλάξει ακόμα και μέσα σε μία μέρα. Στα δείγματα ελέγχουμε για βακτήρια που υποδεικνύουν την ύπαρξη κοπρανώδους ύλης, γνωστά ως "οργανισμοί δείκτες κοπρανωδών" (FIOs), όπως τα Escherichia coli (E. coli) και Intestinal enterococci (IE). Αυτά μπορεί να προέρχονται από λύματα, ζώα, πτηνά ή απορροές δρόμων.

Όταν τα επίπεδα FIOs αυξάνονται, οι κίνδυνοι για την υγεία των λουομένων μεγαλώνουν.
Κατηγορίες & Όρια για Παράκτια Νερά:

Άριστη: E. coli ≤250 cfu/100ml, IE ≤100 cfu/100ml (95%)
Καλή: E. coli ≤500 cfu/100ml, IE ≤200 cfu/100ml (95%)
Επαρκής: E. coli ≤500 cfu/100ml, IE ≤185 cfu/100ml (90%)
Κακή: Χειρότερα από τα όρια της "Επαρκούς".
                    
cfu/100ml: Δείχνει τη συγκέντρωση βακτηρίων (μονάδες σχηματισμού αποικιών ανά 100 ml νερού).
Όσο χαμηλότερα είναι αυτά τα επίπεδα, τόσο καλύτερη είναι η ποιότητα του νερού και ασφαλέστερη η κολύμβηση.</p>
                </div>
            </div>
            


            <div class="map-filter-section">
                <div id="mapc" class="map-container">
                    <div id="map2" class="map-section mb-4"></div>
                </div>
                <div class="filter-toggle-container">
                    <button class="filter-toggle-btn" onclick="toggleFilterMenu()">Φίλτρα</button>
                </div>
                <div class="filter-container d-flex justify-content-center align-items-center">
                    <div class="filter-image-group">
                        <div class="filter-image-left">
                            <img src="photo_1.jpg" alt="Left Image" class="responsive-image">
                        </div>
                        <div class="filter-image-left">
                            <img src="photo_3.jpg" alt="Left Image" class="responsive-image">
                        </div>  
                    </div>
                    <div id ="fmenu" class="col-lg-4 filter-menu p-4 bg-light rounded shadow hidden">

                        <span class="close9" id="ppp" style="display: none;" onclick="closeFilter()">&times;</span>
                        <div id="filterMenu" class="p-3 bg-light border rounded hidden">
                            <h3>Φίλτρα</h3>
                            <label for="year">Επιλέξτε χρονιά:</label>
                            <select id="year" name="year" class="form-control">
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>
                                <option value="2021">2021</option>
                                <option value="2020">2020</option>
                                <option value="2019">2019</option>
                                <option value="2018">2018</option>
                                <option value="2017">2017</option>
                                <option value="2016">2016</option>                    
                            </select>
                            <label for="month">Επιλέξτε μήνα:</label>
                            <select id="month" name="month" class="form-control mb-3">
                                <option value="maios_">Μάιος</option>
                                <option value="ioynios_">Ιούνιος</option>
                                <option value="ioylios_">Ιούλιος</option>
                                <option value="aygoystos_">Αύγουστος</option>
                                <option value="septemvrios_">Σεπτέμβριος</option>
                                <option value="oktovrios_">Οκτώβριος</option>
                            </select> 
                            <div class="checkbox-group mt-3">
                                <label for="tar">Κατάλοιπα πίσσας:</label>
                                <input type="checkbox" id="tar" name="tar" value="NO" onchange="updateCheckboxValue(this)"> <!-- Checkbox for Tar -->
                                <label for="glass">Γυαλιά:</label>
                                <input type="checkbox" id="glass" name="glass" value="NO" onchange="updateCheckboxValue(this)"> <!-- Checkbox for Glass -->
                                <label for="plastic">Πλαστικά:</label>
                                <input type="checkbox" id="plastic" name="plastic" value="NO" onchange="updateCheckboxValue(this)"> <!-- Checkbox for Plastic -->
                                <label for="caoutchouc">Καουτσούκ:</label>
                                <input type="checkbox" id="caoutchouc" name="caoutchouc" value="NO" onchange="updateCheckboxValue(this)"> <!-- Checkbox for Caoutchouc -->
                                <label for="garbage">Απορρίμματα άλλα:</label>
                                <input type="checkbox" id="garbage" name="garbage" value="NO" onchange="updateCheckboxValue(this)"> <!-- Checkbox for Garbage -->
                                <label for="intenterococciRange">Επιλέξτε Intestinal enterococci (cfu/100ml):</label>
                                <div class="range-slider">
                                    <input type="range" id="intenterococciRange" name="intenterococci" min="0" max="500" value="0" oninput="updateIntenterococciValue(this.value)">
                                    <span id="intenterococciValue">0</span> / 500
                                </div>
                                <label for="ecoliRange">Επιλέξτε Escherichia coli (cfu/100ml):</label>
                                <div class="range-slider">
                                    <input type="range" id="ecoliRange" name="ecoli" min="0" max="500" value="0" oninput="updateEcoliValue(this.value)">
                                    <span id="ecoliValue">0</span> / 500
                                </div>
                                <button id="filterBtn" class="btn btn-primary mt-3">Εφαρμογή</button>
                            </div>
                        </div>
                    </div>
                    <div class="filter-image-group">
                        <div class="filter-image-right">
                            <img src="photo_2.jpg" alt="Right Image" class="responsive-image">

                        </div>
                        <div class="filter-image-right">
                            <img src="photo_4.jpg" alt="Right Image" class="responsive-image">

                        </div>
                    </div>
                </div>
            </div>
            <div id="tabc" class="table-container hidden">
                <div id="beachesTableContainer" class="table-responsive mt-4 hidden">
                    <h2>Λίστα παραλιών</h2>
                    <label for="sortOption">Ταξινόμηση κατά:</label>
                    <select id="sortOption" name="sortOption">
                        <option value="cleanliness_asc">Ποιότητα νερού (Αύξουσα)</option>
                        <option value="cleanliness_desc">Ποιότητα νερού (Φθίνουσα)</option>
                        <option value="distance_asc">Απόσταση (Αύξουσα)</option>
                        <option value="distance_desc">Απόσταση (Φθίνουσα)</option>
                    </select>
                    <button id="sortBtn" class="btn-primary">Εφαρμογή</button>
                    <table id="beachesTable">
                        <thead>
                            <tr>
                                <th>Όνομα παραλίας</th>
                                <th>Σκορ ποιότητας υδάτων</th>
                                <th>Απόσταση (km)</th>
                                <th>Κατάλοιπα πίσσας</th>
                                <th>Γυαλία</th>
                                <th>Πλαστικά</th>
                                <th>Καουτσούκ</th>
                                <th>Απορρίμματα άλλα</th>
                                <th>Intestinal enterococci (cfu/100ml )</th>
                                <th>Escherichia coli (cfu/100ml)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Rows will be populated dynamically -->
                        </tbody>
                    </table>
                    <label for="beachesLimit">Αριθμός παραλιών προς εμφάνιση:</label>
                    <select id="beachesLimit" name="beachesLimit" onchange="onBeachLimitChange()">
                        <option value="25">25</option>
                        <option value="50">50</option>
                        <option value="75">75</option>
                        <option value="100">100</option>
                        <option value="150">150</option>
                    </select>
                </div> 
            </div>

            <div id="reviewModal" class="modal" tabindex="-1" style="display:none;">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content p-3">
                        <span class="close" onclick="closeReviewForm()">&times;</span>
                        <h2 id="modalBeachName">Αξιολόγησε την παραλία</h2>
                        <form id="revv" method="POST" enctype="multipart/form-data">
                            <textarea name="review_text" class="form-control mb-3" placeholder="Γράψε την κριτική εδώ" required></textarea>
                            <label for="star_rating">Βαθμολόγησε την παραλία:</label>
                            <div class="mb-3">
                                <input type="radio" id="rating1" name="star_rating" value="1" required>
                                <label for="rating1">1</label>
                                <input type="radio" id="rating2" name="star_rating" value="2">
                                <label for="rating2">2</label>
                                <input type="radio" id="rating3" name="star_rating" value="3">
                                <label for="rating3">3</label>
                                <input type="radio" id="rating4" name="star_rating" value="4">
                                <label for="rating4">4</label>
                                <input type="radio" id="rating5" name="star_rating" value="5">
                                <label for="rating5">5</label>
                            </div>
                            <label for="media">Μεταφόρτωση πολυμέσων (φωτογραφίες/βίντεο):</label>
                            <input type="file" id="media" name="media" accept="image/*,video/*" class="form-control mb-3"> 
                            <input type="hidden" id = "stCode" name="stCode" value="stationCodeFromJS">
                            <button id="revsub" type="submit" class="btn btn-primary btn-block">Υποβολή κριτικής</button>
                        </form>
                    </div>
                </div>
            </div>
            <div id="Reviews" class="modal hidden">
                <div class="modal-content">
                    <span class="close" onclick="closeReviews()" >&times;</span>
                    <div id ="allreviews">                          
                    </div>
                </div>
            </div>
          <div id="md" class="modal" tabindex="-1" style="display:none;">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content p-3">
                <span class="close" onclick="closeContactForm()">&times;</span>
                <h2>Επικοινωνία</h2>
                <form id="contactForm" action="ContactServlet" method="POST" enctype="multipart/form-data">
                    <label for="subject">Θέμα:</label>
                    <input type="text" id="subject" name="subject" class="form-control mb-2" required>
                    <label for="contactEmail">Email:</label>
                    <input type="email" id="contactEmail" name="contactEmail" class="form-control mb-2" required>
                    <label for="contactMessage">Μήνυμα:</label>
                    <textarea id="contactMessage" name="contactMessage" class="form-control mb-2" rows="4" required></textarea>
                    <button id="contb" type="submit" class="btn btn-primary btn-block">Αποστολή</button>
                </form>
            </div>
        </div>
    </div>
        </div>
        <div id="settingsModal" class="modal2 hidden">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content p-3">
                    <span class="close" onclick="closeSettings()">&times;</span>
                    <nav>
                        <ul>
                            <li><a href="" id="logout" onclick="logout();">Αποσύνδεση</a></li>
                        </ul>
                    </nav>
                    <h2>Αλλαγή κωδικού</h2>

                    <form id="changePasswordForm" action="ChangePassword" method="POST">
                        <div class="form-fields">
                            <label for="oldPassword">Παλιός κωδικός:</label>
                            <input type="password" id="oldPassword" name="oldPassword" required>
                            <label for="newPassword">Νέος κωδικός:</label>
                            <input type="password" id="newPassword" name="newPassword" required>
                            <label for="confirmPassword">Επιβεβαίωση νέου κωδικού:</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" required>
                            <button type="submit">Αλλαγή</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="third-section">
            <footer>
                <div class="footer-container">
                    <div class="footer-section about">
                        <h3>Σχετικά με εμάς</h3>
                        <p>                 
                       Είμαστε μια πλατφόρμα υπεύθυνη για την παρακολούθηση της ποιότητας των υδάτων κολύμβησης της Περιφέρειας Κρήτης
                        </p>
                    </div>
                    <div class="footer-section links">
                        <h3>Χρήσιμοι σύνδεσμοι</h3>
                        <ul>
                            <li><a href="" onclick="gotoform()">Αρχική</a></li>
                            <li><a href="#contactModal" onclick="openContactForm()">Επικοινωνία</a></li>
                        </ul>
                    </div>

                    <div class="footer-section contact">
                        <h3>Επικοινωνήστε μαζί μας</h3>
                        <p>Email: stavrgiannis5@gmail.com</p>
                        <p>Phone: 6977146698</p>
                        <div class="social-icons">
                            <a href="#" class="social-icon"><i class="fa fa-facebook"></i></a>
                            <a href="#" class="social-icon"><i class="fa fa-twitter"></i></a>
                            <a href="#" class="social-icon"><i class="fa fa-instagram"></i></a>
                        </div>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2024 Beach Reviews. All rights reserved.</p>
                </div>
            </footer> 
        </div>

        <!-- Bootstrap JS and dependencies -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.4.0/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="user.js"></script>
         <script>
        function toggleCloseButton() {
            const closeButton = document.getElementById('ppp');
            const fmenu = document.getElementById('fmenu');
            if (window.innerWidth <= 768) {
                closeButton.style.display = 'inline'; // Show for 768px or smaller
            } else {
                closeButton.style.display = 'none'; // Hide for larger screens
                fmenu.style.display="inline";
            }
        }

        // Run on page load
        toggleCloseButton();

        // Run on window resize
        window.addEventListener('resize', toggleCloseButton);
    </script>

    </body>
</html>
